{
  "info": {
    "_postman_id": "c8ed40ed-e4a4-49f3-888f-b47c7ab709e2",
    "name": "RabbitMQ_Facade",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "1117312"
  },
  "item": [
    {
      "name": "Health",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Accept",
            "value": "application/json",
            "type": "text"
          }
        ],
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/health",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "health"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Poll Events (New /v1/events)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events?queue={{queueName}}&eventType={{eventType}}&limit=10&leaseSeconds=10&includeData=true",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events"
          ],
          "query": [
            {
              "key": "queue",
              "value": "{{queueName}}"
            },
            {
              "key": "eventType",
              "value": "{{eventType}}"
            },
            {
              "key": "limit",
              "value": "10"
            },
            {
              "key": "leaseSeconds",
              "value": "10"
            },
            {
              "key": "includeData",
              "value": "true"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Poll Events (Compat /v1/events/users)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/users?queue={{queueName}}&eventName={{eventName}}&limit=10&leaseSeconds=10&includeData=true",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "users"
          ],
          "query": [
            {
              "key": "queue",
              "value": "{{queueName}}"
            },
            {
              "key": "eventName",
              "value": "{{eventName}}"
            },
            {
              "key": "limit",
              "value": "10"
            },
            {
              "key": "leaseSeconds",
              "value": "10"
            },
            {
              "key": "includeData",
              "value": "true"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Publish Message",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"exchange\": \"\",\n  \"routingKey\": \"{{queueName}}\",\n  \"persistent\": true,\n  \"contentType\": \"application/json\",\n  \"headers\": {\n    \"key\": \"evt-1001\",\n    \"application\": \"PingOneAIC\",\n    \"accountId\": \"24525\",\n    \"action\": \"UPDATE\"\n  },\n  \"payload\": {\n    \"IdCliente\": \"24525\",\n    \"Estado\": \"ACTIVO\"\n  }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/publish",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "publish"
          ]
        }
      },
      "response": []
    },
    {
      "name": "ACK Message by ID",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"eventId\":\"replace-with-event-id\"}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/ack-by-id",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "ack-by-id"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Fail Message by ID",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"eventId\": \"replace-with-event-id\",\n  \"exceptionMessage\": \"Business validation failed\",\n  \"requeue\": true\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/fail-by-id",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "fail-by-id"
          ]
        }
      },
      "response": []
    },
    {
      "name": "ACK Batch",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"batchId\": \"b_12345678\",\n  \"eventIds\": [\"event-id-1\", \"event-id-2\"]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/acks",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "acks"
          ]
        }
      },
      "response": []
    },
    {
      "name": "NACK Batch",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"batchId\": \"b_12345678\",\n  \"eventIds\": [\"event-id-1\"],\n  \"requeue\": true\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/nacks",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "nacks"
          ]
        }
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "facadeHost",
      "value": "localhost"
    },
    {
      "key": "facadePort",
      "value": "8000"
    },
    {
      "key": "facadeAPIVersion",
      "value": "v1"
    },
    {
      "key": "facadeAPIKey",
      "value": "replace_with_api_key"
    },
    {
      "key": "queueName",
      "value": "Ping.ClienteModificadoSubscriptor"
    },
    {
      "key": "eventType",
      "value": "ClienteModificado"
    },
    {
      "key": "eventName",
      "value": "ClienteModificado"
    }
  ]
}
