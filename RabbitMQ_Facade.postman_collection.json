{
  "info": {
    "_postman_id": "c8ed40ed-e4a4-49f3-888f-b47c7ab709e2",
    "name": "RabbitMQ_Facade",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "1117312"
  },
  "item": [
    {
      "name": "Publish Message",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"exchange\": \"\",\n  \"routingKey\": \"cs-baseline\",\n  \"persistent\": true,\n  \"contentType\": \"application/json\",\n  \"payload\": {\n    \"Name\": \"CuentaModificada\",\n    \"Action\": \"UPDATE\",\n    \"Application\": \"PingOneAIC\",\n    \"Sender\": \"PingOneAIC\",\n    \"AccountId\": \"24525\",\n    \"Content\": \"{\\\"idAlumno\\\":\\\"24525\\\",\\\"status\\\":\\\"ACTIVE\\\"}\"\n  }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/publish",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "publish"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Read Messages from Queue",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/users?limit=10&leaseSeconds=10&eventName=CuentaModificada&includeData=true",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "users"
          ],
          "query": [
            {
              "key": "limit",
              "value": "10"
            },
            {
              "key": "leaseSeconds",
              "value": "10"
            },
            {
              "key": "eventName",
              "value": "CuentaModificada"
            },
            {
              "key": "includeData",
              "value": "true"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "ACK Message by ID",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\"eventId\":\"replace-with-event-id\"}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/ack-by-id",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "ack-by-id"
          ]
        }
      },
      "response": []
    },
    {
      "name": "ACK Batch",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"batchId\": \"b_12345678\",\n  \"eventIds\": [\"event-id-1\", \"event-id-2\"]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/acks",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "acks"
          ]
        }
      },
      "response": []
    },
    {
      "name": "NACK Batch",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          },
          {
            "key": "X-API-Key",
            "value": "{{facadeAPIKey}}",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"batchId\": \"b_12345678\",\n  \"eventIds\": [\"event-id-1\"],\n  \"requeue\": true\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://{{facadeHost}}:{{facadePort}}/{{facadeAPIVersion}}/events/nacks",
          "protocol": "http",
          "host": [
            "{{facadeHost}}"
          ],
          "port": "{{facadePort}}",
          "path": [
            "{{facadeAPIVersion}}",
            "events",
            "nacks"
          ]
        }
      },
      "response": []
    }
  ],
  "variable": [
    {
      "key": "facadeHost",
      "value": "localhost"
    },
    {
      "key": "facadePort",
      "value": "8000"
    },
    {
      "key": "facadeAPIVersion",
      "value": "v1"
    },
    {
      "key": "facadeAPIKey",
      "value": "replace_with_api_key"
    }
  ]
}
